# yaml
openapi: 3.0.3
info:
  title: Time Deposit API
  description: API for managing and updating time deposit balances
  version: 1.0.0

servers:
  - url: http://localhost:8080
    description: Local development server
  - url: https://api.example.com/v1
    description: Production example server

paths:
  /time-deposits:
    get:
      summary: Retrieve all time deposits
      operationId: getAllTimeDeposits
      responses:
        '200':
          description: List of all time deposits
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TimeDeposit'

    put:
      summary: Update balances of all time deposits
      operationId: updateAllTimeDepositBalances
      description: Recalculates and updates balances for all time deposits in the database. No request body required.
      responses:
        '200':
          description: Balances updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateResult'
        '500':
          description: Internal server error

components:
  schemas:
    TimeDeposit:
      type: object
      required:
        - id
        - planType
        - balance
        - days
        - withdrawals
      properties:
        id:
          type: integer
          format: int64
          example: 1
        planType:
          type: string
          description: 'The plan type. Expected values: Basic, Student, Premium'
          enum:
            - Basic
            - Student
            - Premium
          example: Basic
        balance:
          type: number
          format: double
          example: 10500.75
        days:
          type: integer
          example: 180
        withdrawals:
          type: integer
          example: 2

    UpdateResult:
      type: object
      properties:
        updatedCount:
          type: integer
          example: 42
        message:
          type: string
          example: "Balances updated successfully"